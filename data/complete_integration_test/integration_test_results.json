{
  "test_summary": {
    "total_tests": 45,
    "successful_tests": 45,
    "failed_tests": 0,
    "success_rate": 1.0,
    "avg_execution_time": 25.314991596009996,
    "mode_stats": {
      "basic": {
        "total": 9,
        "success": 9
      },
      "explainable": {
        "total": 18,
        "success": 18
      },
      "enhanced": {
        "total": 18,
        "success": 18
      }
    },
    "bbox_stats": {
      "enabled": 18,
      "disabled": 27,
      "enabled_success": 18,
      "disabled_success": 27
    },
    "detailed_results": [
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What does this image show?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 13.118942499160767,
        "stdout": "",
        "stderr": "2025-05-23 18:55:11,968 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 18:55:12,083 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:55:12,084 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:55:16,195 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:55:16,198 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 18:55:16,198 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 18:55:16,198 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:55:16,198 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:55:16,198 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:55:16,201 - medxplain_vqa_enhanced - INFO - Processing image test_6551\n2025-05-23 18:55:16,457 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: no\n2025-05-23 18:55:16,457 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 18:55:18,733 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 18:55:19,503 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_01/medxplain_basic_test_6551.png\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_01/medxplain_basic_vqa_test_6551.json\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_01\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - Answer: This image displays gross and microscopic pathology of a segment of trachea.  Panels A and B show th...\n2025-05-23 18:55:19,504 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What does this image show?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 21.274914264678955,
        "stdout": "",
        "stderr": "2025-05-23 18:55:25,006 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 18:55:25,122 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:55:25,123 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:55:29,360 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:55:29,363 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:55:29,364 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:55:29,364 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:55:29,364 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:55:29,364 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:55:29,364 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:55:29,364 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 18:55:29,365 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 18:55:29,365 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:55:29,365 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:55:29,365 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 18:55:29,365 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 18:55:29,365 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:55:29,365 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:55:29,366 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:55:29,369 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: True)\n2025-05-23 18:55:29,369 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:55:29,616 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:55:29,616 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:55:31,997 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:55:31,998 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:55:31,998 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 18:55:32,087 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 18:55:32,087 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:55:36,602 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:55:40,676 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_02/medxplain_explainable_bbox_test_6551.png\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_02/medxplain_explainable_vqa_bbox_test_6551.json\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_02\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Answer: The middle left portion of the image (Panel B) displays a segment of trachea.  The cartilaginous rin...\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:55:40,677 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.532)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What does this image show?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 23.45031976699829,
        "stdout": "",
        "stderr": "2025-05-23 18:55:46,300 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 18:55:46,415 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:55:46,416 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:55:50,686 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:55:50,689 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:55:50,690 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:55:50,690 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:55:50,690 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:55:50,690 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:55:50,690 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:55:50,690 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 18:55:50,690 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 18:55:50,691 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:55:50,691 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:55:50,691 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 18:55:50,691 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 18:55:50,691 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:55:50,691 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:55:50,691 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:55:50,694 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: False)\n2025-05-23 18:55:50,694 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:55:50,947 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:55:50,947 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:55:53,523 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:55:53,523 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:55:53,606 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 18:55:53,606 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:55:58,922 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:56:04,157 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_03/medxplain_explainable_test_6551.png\n2025-05-23 18:56:04,157 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_03/medxplain_explainable_vqa_test_6551.json\n2025-05-23 18:56:04,157 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:56:04,157 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_03\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Answer: The middle left portion of image A shows a segment of what appears to be a resected trachea, likely ...\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:56:04,158 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.913)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What does this image show?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 37.34369230270386,
        "stdout": "",
        "stderr": "2025-05-23 18:56:09,887 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 18:56:10,003 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:56:10,003 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:56:14,329 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:56:14,332 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:56:14,333 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:56:14,333 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:56:14,333 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:56:14,333 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:56:14,333 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:56:14,334 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 18:56:14,334 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 18:56:14,334 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:56:14,334 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:56:14,334 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 18:56:14,334 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 18:56:14,335 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:56:14,335 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:56:14,335 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:56:14,338 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: True)\n2025-05-23 18:56:14,338 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:56:14,623 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:56:14,623 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:56:17,924 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:56:17,924 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:56:17,924 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 18:56:18,026 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 18:56:18,026 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 18:56:32,861 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.833, steps: 6)\n2025-05-23 18:56:32,862 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:56:36,311 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_04/medxplain_enhanced_bbox_test_6551.png\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_04/medxplain_explainable_vqa_bbox_test_6551.json\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 18:56:41,381 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_04\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - Answer: The images appear to show a gross specimen of a segment of the gastrointestinal tract, likely the es...\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.532)\n2025-05-23 18:56:41,382 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.833\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What does this image show?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 35.672555685043335,
        "stdout": "",
        "stderr": "2025-05-23 18:56:47,171 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 18:56:47,287 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:56:47,287 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:56:51,428 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:56:51,431 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:56:51,432 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:56:51,432 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:56:51,432 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:56:51,432 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:56:51,432 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:56:51,432 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:56:51,433 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:56:51,437 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: False)\n2025-05-23 18:56:51,437 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:56:51,688 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:56:51,688 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:56:53,939 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:56:53,940 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:56:54,036 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 18:56:54,037 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 18:57:08,353 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: pathology_focused, confidence: 0.850, steps: 6)\n2025-05-23 18:57:08,353 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:57:12,050 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:57:17,092 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_05/medxplain_enhanced_test_6551.png\n2025-05-23 18:57:17,092 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_05/medxplain_explainable_vqa_test_6551.json\n2025-05-23 18:57:17,092 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:57:17,092 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 18:57:17,092 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:57:17,092 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_05\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Answer: The images appear to show a gross specimen of a tubular organ, possibly a segment of the gastrointes...\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.913)\n2025-05-23 18:57:17,093 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.850\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What pathological changes are visible?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 13.252429723739624,
        "stdout": "",
        "stderr": "2025-05-23 18:57:22,809 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 18:57:22,945 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:57:22,946 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:57:27,254 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:57:27,257 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 18:57:27,257 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 18:57:27,258 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:57:27,258 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:57:27,258 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:57:27,260 - medxplain_vqa_enhanced - INFO - Processing image test_6551\n2025-05-23 18:57:27,510 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: no\n2025-05-23 18:57:27,511 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 18:57:29,895 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 18:57:30,563 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_06/medxplain_basic_test_6551.png\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_06/medxplain_basic_vqa_test_6551.json\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_06\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - Answer: The images show a segment of bowel.  Grossly, the bowel wall appears thickened, and the mucosa exhib...\n2025-05-23 18:57:30,564 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What pathological changes are visible?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 19.29228949546814,
        "stdout": "",
        "stderr": "2025-05-23 18:57:35,999 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 18:57:36,109 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:57:36,109 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:57:40,347 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:57:40,350 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:57:40,350 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:57:40,350 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:57:40,350 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:57:40,350 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:57:40,350 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:57:40,351 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:57:40,354 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: True)\n2025-05-23 18:57:40,354 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:57:40,612 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:57:40,612 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:57:43,931 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:57:43,932 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:57:43,932 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 18:57:44,010 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 18:57:44,011 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:57:46,676 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:57:49,728 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_07/medxplain_explainable_bbox_test_6551.png\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_07/medxplain_explainable_vqa_bbox_test_6551.json\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_07\n2025-05-23 18:57:49,729 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:57:49,730 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 18:57:49,730 - medxplain_vqa_enhanced - INFO - Answer: The middle-left region of the image displays a segment of what appears to be a fixed and opened tubu...\n2025-05-23 18:57:49,730 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 18:57:49,730 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:57:49,730 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.532)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What pathological changes are visible?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 18.824324131011963,
        "stdout": "",
        "stderr": "2025-05-23 18:57:55,197 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 18:57:55,307 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:57:55,307 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:57:59,336 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:57:59,339 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:57:59,339 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:57:59,339 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:57:59,339 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:57:59,339 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:57:59,339 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:57:59,340 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:57:59,343 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: False)\n2025-05-23 18:57:59,343 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:57:59,582 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:57:59,582 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:58:02,715 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:58:02,715 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:58:02,798 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 18:58:02,798 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:58:05,843 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:58:08,593 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_08/medxplain_explainable_test_6551.png\n2025-05-23 18:58:08,593 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_08/medxplain_explainable_vqa_test_6551.json\n2025-05-23 18:58:08,593 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_08\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Answer: The image displays a gross specimen of a segment of esophagus (likely opened longitudinally) and a m...\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:58:08,594 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.913)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What pathological changes are visible?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 30.25171208381653,
        "stdout": "",
        "stderr": "2025-05-23 18:58:14,217 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 18:58:14,333 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:58:14,333 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:58:18,527 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:58:18,530 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:58:18,530 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:58:18,530 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:58:18,530 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:58:18,530 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:58:18,530 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:58:18,531 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:58:18,534 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: True)\n2025-05-23 18:58:18,534 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:58:18,775 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:58:18,776 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:58:20,766 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:58:20,767 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:58:20,767 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 18:58:20,856 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 18:58:20,856 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 18:58:32,345 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.833, steps: 6)\n2025-05-23 18:58:32,345 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:58:35,108 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:58:38,768 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_09/medxplain_enhanced_bbox_test_6551.png\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_09/medxplain_explainable_vqa_bbox_test_6551.json\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_09\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 18:58:38,769 - medxplain_vqa_enhanced - INFO - Answer: The middle image (B) displays a gross specimen, likely a segment of bowel, opened longitudinally.  W...\n2025-05-23 18:58:38,770 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 18:58:38,770 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:58:38,770 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.532)\n2025-05-23 18:58:38,770 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.833\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "What pathological changes are visible?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 30.168453454971313,
        "stdout": "",
        "stderr": "2025-05-23 18:58:44,357 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 18:58:44,473 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:58:44,473 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:58:48,536 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:58:48,538 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:58:48,539 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:58:48,539 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:58:48,539 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:58:48,539 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:58:48,540 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:58:48,540 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 18:58:48,540 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 18:58:48,540 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:58:48,540 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:58:48,540 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 18:58:48,540 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 18:58:48,541 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:58:48,541 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:58:48,541 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:58:48,544 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: False)\n2025-05-23 18:58:48,544 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:58:48,793 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:58:48,793 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:58:51,713 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:58:51,713 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:58:51,816 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 18:58:51,817 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 18:59:03,353 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: pathology_focused, confidence: 0.850, steps: 6)\n2025-05-23 18:59:03,353 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:59:05,721 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:59:08,882 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_10/medxplain_enhanced_test_6551.png\n2025-05-23 18:59:08,882 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_10/medxplain_explainable_vqa_test_6551.json\n2025-05-23 18:59:08,882 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:59:08,882 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 18:59:08,882 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_10\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Answer: The middle-left region of the provided image appears grossly normal.  No distinct masses, discolorat...\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.913)\n2025-05-23 18:59:08,883 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.850\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "Is there any abnormality present?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 12.297806024551392,
        "stdout": "",
        "stderr": "2025-05-23 18:59:14,461 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 18:59:14,598 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:59:14,598 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:59:18,719 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:59:18,722 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 18:59:18,722 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 18:59:18,722 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:59:18,722 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:59:18,722 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:59:18,725 - medxplain_vqa_enhanced - INFO - Processing image test_6551\n2025-05-23 18:59:18,964 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: no\n2025-05-23 18:59:18,964 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 18:59:20,807 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_11/medxplain_basic_test_6551.png\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_11/medxplain_basic_vqa_test_6551.json\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_11\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - Answer: The images show a gross specimen and microscopic view of a segment of esophagus.  No obvious abnorma...\n2025-05-23 18:59:21,317 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "Is there any abnormality present?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 25.556519031524658,
        "stdout": "",
        "stderr": "2025-05-23 18:59:27,139 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 18:59:27,270 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:59:27,270 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:59:31,632 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:59:31,635 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:59:31,635 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:59:31,636 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:59:31,636 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:59:31,636 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:59:31,636 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:59:31,636 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 18:59:31,636 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 18:59:31,636 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:59:31,637 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:59:31,637 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 18:59:31,637 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 18:59:31,637 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:59:31,637 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:59:31,637 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:59:31,640 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: True)\n2025-05-23 18:59:31,640 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:59:31,879 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:59:31,880 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 18:59:36,656 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 18:59:36,656 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 18:59:36,656 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 18:59:36,750 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 18:59:36,750 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 18:59:41,296 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_12/medxplain_explainable_bbox_test_6551.png\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_12/medxplain_explainable_vqa_bbox_test_6551.json\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_12\n2025-05-23 18:59:46,883 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 18:59:46,884 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 18:59:46,884 - medxplain_vqa_enhanced - INFO - Answer: The provided images appear to show a gross specimen of a trachea and esophagus, likely from an autop...\n2025-05-23 18:59:46,884 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 18:59:46,884 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 18:59:46,884 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.532)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "Is there any abnormality present?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 27.151501417160034,
        "stdout": "",
        "stderr": "2025-05-23 18:59:52,454 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 18:59:52,531 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 18:59:52,531 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 18:59:56,848 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 18:59:56,850 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 18:59:56,851 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 18:59:56,851 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 18:59:56,851 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 18:59:56,851 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 18:59:56,851 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 18:59:56,851 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 18:59:56,852 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 18:59:56,852 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 18:59:56,852 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 18:59:56,852 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 18:59:56,852 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 18:59:56,852 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 18:59:56,852 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 18:59:56,853 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 18:59:56,855 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: False)\n2025-05-23 18:59:56,856 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 18:59:57,106 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 18:59:57,106 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:00:01,541 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:00:01,542 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:00:01,627 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:00:01,628 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:00:07,581 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_13/medxplain_explainable_test_6551.png\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_13/medxplain_explainable_vqa_test_6551.json\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_13\n2025-05-23 19:00:14,077 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:00:14,078 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:00:14,078 - medxplain_vqa_enhanced - INFO - Answer: The provided images appear to show a gross specimen of a segment of esophagus and trachea, likely fr...\n2025-05-23 19:00:14,078 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:00:14,078 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:00:14,078 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.913)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "Is there any abnormality present?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 41.98935413360596,
        "stdout": "",
        "stderr": "2025-05-23 19:00:19,773 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 19:00:19,880 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:00:19,880 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:00:24,027 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:00:24,029 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:00:24,030 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:00:24,030 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:00:24,030 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:00:24,030 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:00:24,031 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:00:24,031 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:00:24,031 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:00:24,031 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:00:24,031 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:00:24,032 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:00:24,032 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 19:00:24,032 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:00:24,032 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 19:00:24,032 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:00:24,035 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: True)\n2025-05-23 19:00:24,035 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:00:24,279 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 19:00:24,279 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:00:28,773 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:00:28,773 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:00:28,774 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:00:28,865 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:00:28,865 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:00:43,875 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: pathology_focused, confidence: 0.840, steps: 6)\n2025-05-23 19:00:43,875 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:00:48,157 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:00:55,869 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_14/medxplain_enhanced_bbox_test_6551.png\n2025-05-23 19:00:55,869 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_14/medxplain_explainable_vqa_bbox_test_6551.json\n2025-05-23 19:00:55,869 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_14\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Answer: The provided images appear to show a gross dissection and histologic section of a tubular organ, pos...\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.532)\n2025-05-23 19:00:55,870 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.840\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_6551.jpg",
        "question": "Is there any abnormality present?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 41.46936321258545,
        "stdout": "",
        "stderr": "2025-05-23 19:01:01,658 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 19:01:01,774 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:01:01,775 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:01:06,045 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:01:06,048 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:01:06,048 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:01:06,048 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:01:06,049 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:01:06,049 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:01:06,049 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:01:06,049 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:01:06,049 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:01:06,049 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:01:06,049 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:01:06,050 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:01:06,050 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 19:01:06,050 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:01:06,050 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_6551\n2025-05-23 19:01:06,050 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:01:06,053 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_6551 (bbox: False)\n2025-05-23 19:01:06,053 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:01:06,303 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: no\n2025-05-23 19:01:06,304 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:01:10,783 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:01:10,783 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:01:10,867 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:01:10,867 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:01:24,628 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.866, steps: 6)\n2025-05-23 19:01:24,628 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:01:29,915 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_15/medxplain_enhanced_test_6551.png\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_15/medxplain_explainable_vqa_test_6551.json\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - âœ… Sample test_6551 processed successfully\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 19:01:37,406 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_15\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - Answer: The provided images appear to show a gross specimen of a trachea and esophagus, likely from an autop...\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.913)\n2025-05-23 19:01:37,407 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.866\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What does this image show?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 14.073874235153198,
        "stdout": "",
        "stderr": "2025-05-23 19:01:42,943 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 19:01:43,021 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:01:43,022 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:01:47,615 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:01:47,618 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 19:01:47,618 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 19:01:47,618 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:01:47,618 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:01:47,618 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:01:47,622 - medxplain_vqa_enhanced - INFO - Processing image test_0586\n2025-05-23 19:01:47,894 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: yes\n2025-05-23 19:01:47,894 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 19:01:50,629 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 19:01:51,552 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_16/medxplain_basic_test_0586.png\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_16/medxplain_basic_vqa_test_0586.json\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_16\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - Answer: This image appears to depict a microscopic view of cardiac muscle tissue, likely stained with a tric...\n2025-05-23 19:01:51,553 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What does this image show?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 19.89457392692566,
        "stdout": "",
        "stderr": "2025-05-23 19:01:57,181 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 19:01:57,297 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:01:57,298 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:02:01,445 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:02:01,448 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:02:01,448 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:02:01,449 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:02:01,449 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:02:01,449 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:02:01,449 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:02:01,449 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:02:01,449 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:02:01,449 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:02:01,450 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:02:01,450 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:02:01,450 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 19:02:01,450 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:02:01,450 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:02:01,450 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:02:01,453 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: True)\n2025-05-23 19:02:01,453 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:02:01,697 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:02:01,697 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:02:04,983 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 0.800)\n2025-05-23 19:02:04,984 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:02:04,984 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:02:05,077 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:02:05,078 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:02:08,303 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:02:11,460 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_17/medxplain_explainable_bbox_test_0586.png\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_17/medxplain_explainable_vqa_bbox_test_0586.json\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_17\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Answer: This image appears to be a Masson's trichrome stain of cardiac tissue.  The lower central region sho...\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Reformulation quality: 0.800\n2025-05-23 19:02:11,461 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.418)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What does this image show?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 18.849342823028564,
        "stdout": "",
        "stderr": "2025-05-23 19:02:16,927 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 19:02:17,061 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:02:17,061 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:02:21,071 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:02:21,074 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:02:21,075 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:02:21,076 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:02:21,076 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:02:21,076 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 19:02:21,076 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:02:21,076 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:02:21,076 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:02:21,079 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: False)\n2025-05-23 19:02:21,079 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:02:21,344 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:02:21,344 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:02:23,810 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:02:23,810 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:02:23,908 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:02:23,909 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:02:27,093 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:02:30,355 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_18/medxplain_explainable_test_0586.png\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_18/medxplain_explainable_vqa_test_0586.json\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_18\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Answer: This image appears to show a histological section of cardiac muscle, likely stained with a trichrome...\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:02:30,356 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.847)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What does this image show?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 33.433701038360596,
        "stdout": "",
        "stderr": "2025-05-23 19:02:36,006 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 19:02:36,086 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:02:36,086 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:02:41,619 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:02:41,622 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:02:41,622 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:02:41,622 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:02:41,622 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:02:41,622 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:02:41,622 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:02:41,622 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:02:41,623 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:02:41,626 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: True)\n2025-05-23 19:02:41,626 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:02:41,876 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:02:41,876 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:02:44,098 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:02:44,098 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:02:44,098 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:02:44,198 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:02:44,198 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:02:58,027 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.826, steps: 6)\n2025-05-23 19:02:58,028 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:03:00,081 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:03:03,692 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_19/medxplain_enhanced_bbox_test_0586.png\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_19/medxplain_explainable_vqa_bbox_test_0586.json\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_19\n2025-05-23 19:03:03,693 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:03:03,694 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:03:03,694 - medxplain_vqa_enhanced - INFO - Answer: This image appears to be a microscopic view of cardiac muscle tissue.  The striations characteristic...\n2025-05-23 19:03:03,694 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:03:03,694 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:03:03,694 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.418)\n2025-05-23 19:03:03,694 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.826\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What does this image show?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 34.47888803482056,
        "stdout": "",
        "stderr": "2025-05-23 19:03:09,267 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 19:03:09,401 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:03:09,401 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:03:13,730 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:03:13,733 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:03:13,733 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:03:13,733 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:03:13,733 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:03:13,733 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:03:13,734 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:03:13,737 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: False)\n2025-05-23 19:03:13,737 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:03:13,990 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:03:13,990 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:03:17,282 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:03:17,282 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:03:17,368 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:03:17,368 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:03:30,360 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.866, steps: 6)\n2025-05-23 19:03:30,361 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:03:33,699 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:03:38,147 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_20/medxplain_enhanced_test_0586.png\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_20/medxplain_explainable_vqa_test_0586.json\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_20\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Answer: This image appears to be a microscopic section, possibly stained with a silver stain given the black...\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.847)\n2025-05-23 19:03:38,148 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.866\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What pathological changes are visible?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 13.72472071647644,
        "stdout": "",
        "stderr": "2025-05-23 19:03:43,670 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 19:03:43,786 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:03:43,786 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:03:48,222 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:03:48,225 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 19:03:48,225 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 19:03:48,225 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:03:48,225 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:03:48,225 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:03:48,228 - medxplain_vqa_enhanced - INFO - Processing image test_0586\n2025-05-23 19:03:48,474 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: yes\n2025-05-23 19:03:48,474 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 19:03:51,208 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 19:03:52,009 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_21/medxplain_basic_test_0586.png\n2025-05-23 19:03:52,009 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_21/medxplain_basic_vqa_test_0586.json\n2025-05-23 19:03:52,009 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:03:52,009 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:03:52,009 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:03:52,009 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:03:52,010 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 19:03:52,010 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:03:52,010 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_21\n2025-05-23 19:03:52,010 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:03:52,010 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:03:52,010 - medxplain_vqa_enhanced - INFO - Answer: This image appears to show a section of liver tissue with portal triads.  The quality of the image i...\n2025-05-23 19:03:52,010 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What pathological changes are visible?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 18.328169107437134,
        "stdout": "",
        "stderr": "2025-05-23 19:03:57,425 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 19:03:57,503 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:03:57,504 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:04:01,697 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:04:01,700 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:04:01,700 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:04:01,701 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:04:01,701 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:04:01,701 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:04:01,701 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:04:01,701 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:04:01,701 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:04:01,701 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:04:01,702 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:04:01,702 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:04:01,702 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 19:04:01,702 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:04:01,702 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:04:01,702 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:04:01,705 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: True)\n2025-05-23 19:04:01,705 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:04:01,952 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:04:01,952 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:04:04,342 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:04:04,342 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:04:04,342 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:04:04,481 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:04:04,481 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:04:07,519 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:04:10,308 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_22/medxplain_explainable_bbox_test_0586.png\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_22/medxplain_explainable_vqa_bbox_test_0586.json\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_22\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Answer: This image appears to depict a section of cardiac muscle tissue with intercalated discs.  While the ...\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:04:10,309 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.418)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What pathological changes are visible?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 18.856393575668335,
        "stdout": "",
        "stderr": "2025-05-23 19:04:15,909 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 19:04:16,024 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:04:16,025 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:04:20,200 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:04:20,202 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:04:20,203 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:04:20,203 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:04:20,203 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:04:20,204 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:04:20,204 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:04:20,204 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:04:20,204 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:04:20,204 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:04:20,204 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:04:20,205 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:04:20,205 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 19:04:20,205 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:04:20,205 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:04:20,205 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:04:20,208 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: False)\n2025-05-23 19:04:20,208 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:04:20,454 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:04:20,454 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:04:23,653 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:04:23,653 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:04:23,745 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:04:23,745 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:04:26,459 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:04:29,161 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_23/medxplain_explainable_test_0586.png\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_23/medxplain_explainable_vqa_test_0586.json\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_23\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Answer: This image appears to depict a section of cardiac muscle tissue with interstitial fibrosis.  The fib...\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:04:29,162 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.847)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What pathological changes are visible?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 33.140385150909424,
        "stdout": "",
        "stderr": "2025-05-23 19:04:34,641 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 19:04:34,719 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:04:34,719 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:04:38,839 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:04:38,841 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:04:38,842 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:04:38,842 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:04:38,842 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:04:38,842 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:04:38,842 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:04:38,842 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:04:38,843 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:04:38,843 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:04:38,843 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:04:38,843 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:04:38,843 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 19:04:38,843 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:04:38,843 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:04:38,844 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:04:38,847 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: True)\n2025-05-23 19:04:38,847 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:04:39,091 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:04:39,091 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:04:41,322 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:04:41,322 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:04:41,322 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:04:41,416 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:04:41,416 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:04:54,952 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.826, steps: 6)\n2025-05-23 19:04:54,952 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:04:57,976 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:05:02,210 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_24/medxplain_enhanced_bbox_test_0586.png\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_24/medxplain_explainable_vqa_bbox_test_0586.json\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_24\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Answer: This image, likely a microscopic view, displays elongated, vertical structures reminiscent of connec...\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.418)\n2025-05-23 19:05:02,211 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.826\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "What pathological changes are visible?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 33.53560924530029,
        "stdout": "",
        "stderr": "2025-05-23 19:05:07,758 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 19:05:07,893 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:05:07,893 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:05:12,367 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:05:12,370 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:05:12,370 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:05:12,371 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:05:12,375 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: False)\n2025-05-23 19:05:12,375 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:05:12,646 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:05:12,646 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:05:16,034 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:05:16,034 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:05:16,135 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:05:16,135 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:05:29,119 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.866, steps: 6)\n2025-05-23 19:05:29,119 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:05:31,956 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:05:35,697 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_25/medxplain_enhanced_test_0586.png\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_25/medxplain_explainable_vqa_test_0586.json\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_25\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - Answer: This image appears to depict a section of tissue with linear structures, possibly fibrous or vascula...\n2025-05-23 19:05:35,698 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:05:35,699 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:05:35,699 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.847)\n2025-05-23 19:05:35,699 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.866\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "Is there any abnormality present?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 13.332768440246582,
        "stdout": "",
        "stderr": "2025-05-23 19:05:41,459 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 19:05:41,594 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:05:41,594 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:05:45,667 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:05:45,670 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 19:05:45,670 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 19:05:45,670 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:05:45,670 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:05:45,670 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:05:45,673 - medxplain_vqa_enhanced - INFO - Processing image test_0586\n2025-05-23 19:05:45,923 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: yes\n2025-05-23 19:05:45,923 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 19:05:48,340 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_26/medxplain_basic_test_0586.png\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_26/medxplain_basic_vqa_test_0586.json\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_26\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:05:49,126 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:05:49,127 - medxplain_vqa_enhanced - INFO - Answer: This image shows portal triads, the defining structural units of the liver.  The image quality is po...\n2025-05-23 19:05:49,127 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "Is there any abnormality present?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 21.75800132751465,
        "stdout": "",
        "stderr": "2025-05-23 19:05:54,677 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 19:05:54,792 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:05:54,792 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:05:58,980 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:05:58,982 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:05:58,983 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:05:58,983 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:05:58,983 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:05:58,983 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:05:58,983 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:05:58,983 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:05:58,983 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:05:58,984 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:05:58,984 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:05:58,984 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:05:58,984 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 19:05:58,984 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:05:58,984 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:05:58,984 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:05:58,987 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: True)\n2025-05-23 19:05:58,987 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:05:59,232 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:05:59,233 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:06:03,142 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:06:03,143 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:06:03,143 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:06:03,240 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:06:03,241 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:06:07,022 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:06:10,880 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_27/medxplain_explainable_bbox_test_0586.png\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_27/medxplain_explainable_vqa_bbox_test_0586.json\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_27\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Answer: The image quality and resolution are poor, making definitive assessment challenging.  However, there...\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:06:10,881 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.418)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "Is there any abnormality present?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 22.673390865325928,
        "stdout": "",
        "stderr": "2025-05-23 19:06:16,685 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 19:06:16,763 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:06:16,764 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:06:21,409 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:06:21,411 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:06:21,411 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:06:21,412 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:06:21,415 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: False)\n2025-05-23 19:06:21,415 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:06:21,670 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:06:21,670 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:06:24,854 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:06:24,854 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:06:24,942 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:06:24,942 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:06:28,958 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:06:33,520 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_28/medxplain_explainable_test_0586.png\n2025-05-23 19:06:33,520 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_28/medxplain_explainable_vqa_test_0586.json\n2025-05-23 19:06:33,520 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:06:33,520 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:06:33,520 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_28\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Answer: This appears to be a poorly stained and low-resolution image of cardiac tissue, possibly showing par...\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:06:33,521 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.847)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "Is there any abnormality present?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 36.78945803642273,
        "stdout": "",
        "stderr": "2025-05-23 19:06:39,131 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 19:06:39,267 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:06:39,267 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:06:43,462 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:06:43,464 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:06:43,465 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:06:43,466 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:06:43,466 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 19:06:43,466 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:06:43,466 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:06:43,466 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:06:43,469 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: True)\n2025-05-23 19:06:43,469 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:06:43,710 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:06:43,710 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:06:46,767 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:06:46,767 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:06:46,767 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:06:46,853 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:06:46,853 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:07:02,945 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.826, steps: 6)\n2025-05-23 19:07:02,945 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:07:05,687 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:07:10,351 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_29/medxplain_enhanced_bbox_test_0586.png\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_29/medxplain_explainable_vqa_bbox_test_0586.json\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_29\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Answer: The image quality and low resolution (224x224) limit definitive assessment. While some areas appear ...\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.418)\n2025-05-23 19:07:10,352 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.826\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_0586.jpg",
        "question": "Is there any abnormality present?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 33.612215757369995,
        "stdout": "",
        "stderr": "2025-05-23 19:07:15,855 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 19:07:15,970 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:07:15,971 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:07:20,102 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:07:20,105 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:07:20,105 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:07:20,105 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_0586\n2025-05-23 19:07:20,106 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:07:20,109 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_0586 (bbox: False)\n2025-05-23 19:07:20,109 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:07:20,358 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:07:20,358 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:07:23,282 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:07:23,282 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:07:23,377 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:07:23,377 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:07:37,224 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: pathology_focused, confidence: 0.850, steps: 6)\n2025-05-23 19:07:37,224 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:07:39,671 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:07:43,907 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_30/medxplain_enhanced_test_0586.png\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_30/medxplain_explainable_vqa_test_0586.json\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - âœ… Sample test_0586 processed successfully\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_30\n2025-05-23 19:07:43,908 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:07:43,909 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:07:43,909 - medxplain_vqa_enhanced - INFO - Answer: The image quality and low resolution (224x224) limit definitive assessment. While some textural vari...\n2025-05-23 19:07:43,909 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:07:43,909 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:07:43,909 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.847)\n2025-05-23 19:07:43,909 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.850\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What does this image show?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 12.074428796768188,
        "stdout": "",
        "stderr": "2025-05-23 19:07:49,491 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 19:07:49,568 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:07:49,568 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:07:53,592 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:07:53,595 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 19:07:53,595 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 19:07:53,595 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:07:53,595 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:07:53,595 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:07:53,598 - medxplain_vqa_enhanced - INFO - Processing image test_2297\n2025-05-23 19:07:53,835 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: yes\n2025-05-23 19:07:53,836 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 19:07:55,573 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 19:07:56,018 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_31/medxplain_basic_test_2297.png\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_31/medxplain_basic_vqa_test_2297.json\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_31\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - Answer: This image shows edematous and erythematous vocal cords.\n...\n2025-05-23 19:07:56,019 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What does this image show?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 19.70080280303955,
        "stdout": "",
        "stderr": "2025-05-23 19:08:01,603 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 19:08:01,678 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:08:01,678 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:08:05,801 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:08:05,804 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:08:05,804 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:08:05,805 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:08:05,805 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:08:05,805 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:08:05,805 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:08:05,805 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:08:05,805 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:08:05,805 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:08:05,806 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:08:05,806 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:08:05,806 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 19:08:05,806 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:08:05,806 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:08:05,806 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:08:05,809 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: True)\n2025-05-23 19:08:05,809 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:08:06,058 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:08:06,058 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:08:08,626 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:08:08,626 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:08:08,626 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:08:08,729 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:08:08,730 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:08:12,507 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:08:15,785 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_32/medxplain_explainable_bbox_test_2297.png\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_32/medxplain_explainable_vqa_bbox_test_2297.json\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_32\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous, erythematous arytenoid cartilages and surrounding tissues, like...\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:08:15,786 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.490)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What does this image show?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 21.07807993888855,
        "stdout": "",
        "stderr": "2025-05-23 19:08:21,386 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 19:08:21,501 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:08:21,501 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:08:25,818 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:08:25,820 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:08:25,821 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:08:25,821 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:08:25,821 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:08:25,822 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:08:25,822 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:08:25,822 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:08:25,822 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:08:25,822 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:08:25,822 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:08:25,823 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:08:25,823 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 19:08:25,823 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:08:25,823 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:08:25,823 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:08:25,826 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: False)\n2025-05-23 19:08:25,826 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:08:26,078 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:08:26,078 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:08:28,555 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 0.800)\n2025-05-23 19:08:28,555 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:08:28,639 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:08:28,639 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:08:32,676 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:08:36,813 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_33/medxplain_explainable_test_2297.png\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_33/medxplain_explainable_vqa_test_2297.json\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_33\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show swollen and erythematous arytenoids and surrounding tissues, suggestive of...\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Reformulation quality: 0.800\n2025-05-23 19:08:36,814 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.947)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What does this image show?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 34.34815549850464,
        "stdout": "",
        "stderr": "2025-05-23 19:08:42,523 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 19:08:42,602 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:08:42,602 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:08:46,895 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:08:46,897 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:08:46,898 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:08:46,898 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:08:46,899 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:08:46,899 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:08:46,899 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:08:46,899 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:08:46,899 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:08:46,899 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:08:46,900 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:08:46,900 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:08:46,900 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 19:08:46,900 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:08:46,900 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:08:46,900 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:08:46,903 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: True)\n2025-05-23 19:08:46,904 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:08:47,183 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:08:47,183 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:08:49,510 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 0.800)\n2025-05-23 19:08:49,510 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:08:49,510 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:08:49,598 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:08:49,598 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:09:03,741 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: comparative_analysis, confidence: 0.837, steps: 6)\n2025-05-23 19:09:03,741 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:09:06,313 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_34/medxplain_enhanced_bbox_test_2297.png\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_34/medxplain_explainable_vqa_bbox_test_2297.json\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:09:11,081 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_34\n2025-05-23 19:09:11,082 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:09:11,082 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:09:11,082 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous and erythematous  tissue, possibly mucosal, with folds and crevi...\n2025-05-23 19:09:11,082 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:09:11,082 - medxplain_vqa_enhanced - INFO - Reformulation quality: 0.800\n2025-05-23 19:09:11,082 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.490)\n2025-05-23 19:09:11,082 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.837\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What does this image show?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 33.4061598777771,
        "stdout": "",
        "stderr": "2025-05-23 19:09:16,704 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 19:09:16,783 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:09:16,783 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:09:21,538 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:09:21,541 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:09:21,541 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:09:21,541 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:09:21,541 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:09:21,542 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:09:21,545 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: False)\n2025-05-23 19:09:21,545 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:09:21,793 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:09:21,793 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:09:24,241 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:09:24,241 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:09:24,331 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:09:24,331 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:09:38,534 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.866, steps: 6)\n2025-05-23 19:09:38,535 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:09:40,954 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:09:44,498 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_35/medxplain_enhanced_test_2297.png\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_35/medxplain_explainable_vqa_test_2297.json\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_35\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - Question: What does this image show?\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous, erythematous tissue, possibly mucosal or serosal, with convolut...\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:09:44,499 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:09:44,500 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.947)\n2025-05-23 19:09:44,500 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.866\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What pathological changes are visible?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 13.628666639328003,
        "stdout": "",
        "stderr": "2025-05-23 19:09:50,086 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 19:09:50,204 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:09:50,204 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:09:54,579 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:09:54,582 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 19:09:54,582 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 19:09:54,583 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:09:54,583 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:09:54,583 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:09:54,585 - medxplain_vqa_enhanced - INFO - Processing image test_2297\n2025-05-23 19:09:54,827 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: yes\n2025-05-23 19:09:54,828 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 19:09:57,736 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_36/medxplain_basic_test_2297.png\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_36/medxplain_basic_vqa_test_2297.json\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_36\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - Answer: The image shows enlarged, erythematous, and edematous arytenoids, suggestive of inflammation or infe...\n2025-05-23 19:09:58,220 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What pathological changes are visible?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 19.141029834747314,
        "stdout": "",
        "stderr": "2025-05-23 19:10:03,692 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 19:10:03,808 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:10:03,808 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:10:08,046 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:10:08,048 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:10:08,049 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:10:08,049 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:10:08,049 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:10:08,049 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:10:08,050 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:10:08,050 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:10:08,050 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:10:08,050 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:10:08,050 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:10:08,050 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:10:08,051 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 19:10:08,051 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:10:08,051 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:10:08,051 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:10:08,054 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: True)\n2025-05-23 19:10:08,054 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:10:08,300 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:10:08,301 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:10:12,028 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:10:12,028 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:10:12,029 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:10:12,112 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:10:12,113 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:10:14,768 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:10:17,310 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_37/medxplain_explainable_bbox_test_2297.png\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_37/medxplain_explainable_vqa_bbox_test_2297.json\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_37\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous, erythematous  tissue, possibly  mucosal or serosal, with promin...\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:10:17,311 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.490)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What pathological changes are visible?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 17.28662896156311,
        "stdout": "",
        "stderr": "2025-05-23 19:10:22,913 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 19:10:23,026 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:10:23,026 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:10:27,107 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:10:27,109 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:10:27,110 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:10:27,111 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 19:10:27,111 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:10:27,111 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:10:27,111 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:10:27,113 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: False)\n2025-05-23 19:10:27,114 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:10:27,366 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:10:27,366 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:10:29,950 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:10:29,950 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:10:30,039 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:10:30,039 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:10:32,227 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:10:34,634 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_38/medxplain_explainable_test_2297.png\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_38/medxplain_explainable_vqa_test_2297.json\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_38\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous and erythematous  tissue, likely mucosal, with a somewhat convol...\n2025-05-23 19:10:34,635 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:10:34,636 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:10:34,636 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.947)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What pathological changes are visible?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 33.634615659713745,
        "stdout": "",
        "stderr": "2025-05-23 19:10:40,158 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 19:10:40,294 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:10:40,294 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:10:44,414 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:10:44,417 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:10:44,417 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:10:44,418 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:10:44,421 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: True)\n2025-05-23 19:10:44,421 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:10:44,667 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:10:44,667 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:10:47,946 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:10:47,946 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:10:47,946 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:10:48,038 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:10:48,038 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:11:01,362 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.826, steps: 6)\n2025-05-23 19:11:01,362 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:11:04,085 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:11:08,137 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_39/medxplain_enhanced_bbox_test_2297.png\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_39/medxplain_explainable_vqa_bbox_test_2297.json\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:11:08,138 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_39\n2025-05-23 19:11:08,139 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:11:08,139 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:11:08,139 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous, erythematous  vocal folds.  The margins are somewhat blunted an...\n2025-05-23 19:11:08,139 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:11:08,139 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:11:08,139 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.490)\n2025-05-23 19:11:08,139 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.826\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "What pathological changes are visible?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 33.58770203590393,
        "stdout": "",
        "stderr": "2025-05-23 19:11:13,805 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 19:11:13,920 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:11:13,921 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:11:18,829 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:11:18,831 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:11:18,832 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:11:18,833 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:11:18,833 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 19:11:18,833 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:11:18,833 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:11:18,833 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:11:18,836 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: False)\n2025-05-23 19:11:18,836 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:11:19,085 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:11:19,085 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:11:22,410 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:11:22,411 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:11:22,497 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:11:22,497 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:11:34,768 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.866, steps: 6)\n2025-05-23 19:11:34,768 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:11:37,688 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:11:41,816 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_40/medxplain_enhanced_test_2297.png\n2025-05-23 19:11:41,816 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_40/medxplain_explainable_vqa_test_2297.json\n2025-05-23 19:11:41,816 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_40\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Question: What pathological changes are visible?\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous, erythematous tissue, possibly mucosal or serosal, with convolut...\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.947)\n2025-05-23 19:11:41,817 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.866\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "Is there any abnormality present?",
        "mode": "basic",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 12.332672119140625,
        "stdout": "",
        "stderr": "2025-05-23 19:11:47,444 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: basic, bounding_boxes: DISABLED)\n2025-05-23 19:11:47,576 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:11:47,577 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:11:51,976 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:11:51,979 - medxplain_vqa_enhanced - INFO - âœ… Basic mode: Gemini integration ready\n2025-05-23 19:11:51,979 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in basic mode (standard)\n2025-05-23 19:11:51,979 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:11:51,979 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:11:51,979 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:11:51,982 - medxplain_vqa_enhanced - INFO - Processing image test_2297\n2025-05-23 19:11:52,223 - medxplain_vqa_enhanced - INFO - Initial BLIP answer: yes\n2025-05-23 19:11:52,223 - medxplain_vqa_enhanced - INFO - Generating unified answer...\n2025-05-23 19:11:53,739 - medxplain_vqa_enhanced - INFO - Unified answer generated\n2025-05-23 19:11:54,177 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_41/medxplain_basic_test_2297.png\n2025-05-23 19:11:54,177 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_41/medxplain_basic_vqa_test_2297.json\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - Mode: basic (standard)\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_41\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - Answer: The image shows enlarged, erythematous, and edematous arytenoids, consistent with arytenoid edema or...\n2025-05-23 19:11:54,178 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Gemini enhancement\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "Is there any abnormality present?",
        "mode": "explainable",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 25.40165114402771,
        "stdout": "",
        "stderr": "2025-05-23 19:11:59,688 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: ENABLED)\n2025-05-23 19:11:59,767 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:11:59,767 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:12:03,839 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:12:03,842 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:12:03,843 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:12:03,843 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:12:03,843 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:12:03,843 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:12:03,843 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:12:03,843 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (with bounding boxes)\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:12:03,844 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:12:03,847 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: True)\n2025-05-23 19:12:03,847 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:12:04,088 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:12:04,088 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:12:09,805 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:12:09,805 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:12:09,805 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:12:09,896 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:12:09,896 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:12:13,493 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:12:19,652 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_42/medxplain_explainable_bbox_test_2297.png\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_42/medxplain_explainable_vqa_bbox_test_2297.json\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - Mode: explainable (with bounding boxes)\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_42\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous and erythematous arytenoid cartilages and surrounding tissues, s...\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:12:19,653 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:12:19,654 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.490)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "Is there any abnormality present?",
        "mode": "explainable",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 21.598536014556885,
        "stdout": "",
        "stderr": "2025-05-23 19:12:25,170 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: explainable, bounding_boxes: DISABLED)\n2025-05-23 19:12:25,285 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:12:25,285 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:12:29,694 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:12:29,697 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:12:29,697 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:12:29,697 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:12:29,698 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:12:29,698 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:12:29,698 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:12:29,698 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:12:29,698 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:12:29,698 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:12:29,699 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:12:29,699 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:12:29,699 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in explainable mode (standard)\n2025-05-23 19:12:29,699 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:12:29,699 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:12:29,699 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:12:29,702 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: False)\n2025-05-23 19:12:29,702 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:12:29,951 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:12:29,951 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:12:34,383 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:12:34,383 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:12:34,472 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:12:34,472 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:12:37,639 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:12:41,215 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_43/medxplain_explainable_test_2297.png\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_43/medxplain_explainable_vqa_test_2297.json\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - Mode: explainable (standard)\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_43\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous and erythematous arytenoid cartilages and surrounding tissues, l...\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Enhanced unified answer generation\n2025-05-23 19:12:41,216 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:12:41,217 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.947)\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "Is there any abnormality present?",
        "mode": "enhanced",
        "bbox_enabled": true,
        "success": true,
        "execution_time": 39.10152244567871,
        "stdout": "",
        "stderr": "2025-05-23 19:12:46,737 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: ENABLED)\n2025-05-23 19:12:46,853 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:12:46,853 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:12:52,151 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:12:52,154 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:12:52,155 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:12:52,155 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:12:52,155 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:12:52,155 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:12:52,155 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:12:52,155 - medxplain_vqa_enhanced - INFO - ðŸ†• Initializing Enhanced Grad-CAM with Bounding Boxes...\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM with Bounding Boxes ready\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: enabled)\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (with bounding boxes)\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:12:52,156 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:12:52,159 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: True)\n2025-05-23 19:12:52,159 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:12:52,410 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:12:52,410 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:12:57,002 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:12:57,002 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:12:57,002 - medxplain_vqa_enhanced - INFO - ðŸ†• Running Enhanced Grad-CAM with bounding box extraction...\n2025-05-23 19:12:57,102 - medxplain_vqa_enhanced - INFO - âœ… Enhanced Grad-CAM generated: 5 bounding boxes detected\n2025-05-23 19:12:57,102 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:13:12,308 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: attention_guided, confidence: 0.826, steps: 6)\n2025-05-23 19:13:12,309 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:13:14,831 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:13:20,241 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_44/medxplain_enhanced_bbox_test_2297.png\n2025-05-23 19:13:20,241 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_44/medxplain_explainable_vqa_bbox_test_2297.json\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Enhanced Grad-CAM hooks cleaned up\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Mode: enhanced (with bounding boxes)\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_44\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous and erythematous arytenoid cartilages and surrounding tissues, s...\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.490)\n2025-05-23 19:13:20,242 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.826\n",
        "return_code": 0
      },
      {
        "image_path": "data/images/test/test_2297.jpg",
        "question": "Is there any abnormality present?",
        "mode": "enhanced",
        "bbox_enabled": false,
        "success": true,
        "execution_time": 45.25830054283142,
        "stdout": "",
        "stderr": "2025-05-23 19:13:25,954 - medxplain_vqa_enhanced - INFO - ðŸš€ Starting Enhanced MedXplain-VQA (mode: enhanced, bounding_boxes: DISABLED)\n2025-05-23 19:13:26,071 - medxplain_vqa_enhanced - INFO - Using device: cuda\n2025-05-23 19:13:26,071 - medxplain_vqa_enhanced - INFO - Loading BLIP model from checkpoints/blip/checkpoints/best_hf_model\n/root/miniconda3/envs/medxplain-vqa/lib/python3.10/site-packages/huggingface_hub/file_download.py:943: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.\n  warnings.warn(\n2025-05-23 19:13:30,655 - medxplain_vqa_enhanced - INFO - Loaded model from HuggingFace directory\n2025-05-23 19:13:30,658 - medxplain_vqa_enhanced - INFO - Initializing Gemini Integration...\n2025-05-23 19:13:30,659 - medxplain_vqa_enhanced - INFO - âœ… Gemini Integration ready\n2025-05-23 19:13:30,659 - medxplain_vqa_enhanced - INFO - Initializing Visual Context Extractor...\n2025-05-23 19:13:30,659 - medxplain_vqa_enhanced - INFO - âœ… Visual Context Extractor ready\n2025-05-23 19:13:30,659 - medxplain_vqa_enhanced - INFO - Initializing Query Reformulator...\n2025-05-23 19:13:30,659 - medxplain_vqa_enhanced - INFO - âœ… Query Reformulator ready\n2025-05-23 19:13:30,659 - medxplain_vqa_enhanced - INFO - Initializing Basic Grad-CAM...\n2025-05-23 19:13:30,660 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM ready\n2025-05-23 19:13:30,660 - medxplain_vqa_enhanced - INFO - Initializing Chain-of-Thought Generator...\n2025-05-23 19:13:30,660 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought Generator ready\n2025-05-23 19:13:30,660 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ All explainable AI components initialized successfully (bbox_mode: disabled)\n2025-05-23 19:13:30,660 - medxplain_vqa_enhanced - INFO - ðŸŽ¯ Processing 1 samples in enhanced mode (standard)\n2025-05-23 19:13:30,660 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:13:30,660 - medxplain_vqa_enhanced - INFO - ðŸ“‹ Processing sample 1/1: test_2297\n2025-05-23 19:13:30,661 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:13:30,664 - medxplain_vqa_enhanced - INFO - ðŸ”¬ Processing explainable VQA for image test_2297 (bbox: False)\n2025-05-23 19:13:30,664 - medxplain_vqa_enhanced - INFO - Step 1: BLIP inference...\n2025-05-23 19:13:30,933 - medxplain_vqa_enhanced - INFO - âœ… BLIP answer: yes\n2025-05-23 19:13:30,934 - medxplain_vqa_enhanced - INFO - Step 2: Query reformulation...\n2025-05-23 19:13:36,700 - medxplain_vqa_enhanced - INFO - âœ… Query reformulated (quality: 1.000)\n2025-05-23 19:13:36,700 - medxplain_vqa_enhanced - INFO - Step 3: Enhanced Grad-CAM attention analysis...\n2025-05-23 19:13:36,799 - medxplain_vqa_enhanced - INFO - âœ… Basic Grad-CAM generated: 5 attention regions detected\n2025-05-23 19:13:36,799 - medxplain_vqa_enhanced - INFO - Step 4: Chain-of-Thought reasoning...\n2025-05-23 19:13:52,748 - medxplain_vqa_enhanced - INFO - âœ… Chain-of-Thought generated (flow: pathology_focused, confidence: 0.850, steps: 6)\n2025-05-23 19:13:52,748 - medxplain_vqa_enhanced - INFO - Step 5: Enhanced unified answer generation...\n2025-05-23 19:13:56,775 - medxplain_vqa_enhanced - INFO - âœ… Enhanced explainable VQA processing completed\n2025-05-23 19:14:05,419 - medxplain_vqa_enhanced - INFO - âœ… Enhanced visualization saved to data/complete_integration_test/test_45/medxplain_enhanced_test_2297.png\n2025-05-23 19:14:05,420 - medxplain_vqa_enhanced - INFO - âœ… Enhanced metadata saved to data/complete_integration_test/test_45/medxplain_explainable_vqa_test_2297.json\n2025-05-23 19:14:05,420 - medxplain_vqa_enhanced - INFO - âœ… Sample test_2297 processed successfully\n2025-05-23 19:14:05,420 - medxplain_vqa_enhanced - INFO - ðŸ§¹ Basic Grad-CAM hooks cleaned up\n2025-05-23 19:14:05,420 - medxplain_vqa_enhanced - INFO - \n============================================================\n2025-05-23 19:14:05,420 - medxplain_vqa_enhanced - INFO - ðŸŽ‰ Enhanced MedXplain-VQA COMPLETED\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - ============================================================\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Mode: enhanced (standard)\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Samples processed: 1/1 successful\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Results saved to: data/complete_integration_test/test_45\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - \nðŸ“Š SAMPLE RESULT SUMMARY:\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Question: Is there any abnormality present?\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Answer: The image appears to show edematous and erythematous arytenoid cartilages and surrounding tissues, s...\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Processing steps: BLIP inference â†’ Query reformulation â†’ Enhanced Grad-CAM attention â†’ Chain-of-Thought reasoning â†’ Enhanced unified answer generation\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Reformulation quality: 1.000\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Bounding boxes: 5 detected (avg score: 0.947)\n2025-05-23 19:14:05,421 - medxplain_vqa_enhanced - INFO - Reasoning confidence: 0.850\n",
        "return_code": 0
      }
    ]
  },
  "test_timestamp": "2025-05-23T19:14:08.462328",
  "total_execution_time": 1139.2280356884003,
  "test_configuration": {
    "quick_test": false,
    "total_test_cases": 45,
    "test_images_count": 3,
    "test_questions_count": 3
  }
}